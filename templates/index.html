<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chain of Responsibility - Visualization</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ’° Expense Approval System</h1>
            <p>A visualization of the <strong>Chain of Responsibility</strong> design pattern.</p>
        </header>

        <main>
            <div class="chain-visualization">
                <div class="approver" id="approver-Junior">
                    <div class="status-light"></div>
                    <h3>ğŸ§‘â€ğŸ’» Junior Approver</h3>
                    <span>(Up to $500)</span>
                </div>
                <div class="arrow">&#10230;</div>
                <div class="approver" id="approver-Manager">
                    <div class="status-light"></div>
                    <h3>ğŸ‘©â€ğŸ’¼ Manager</h3>
                    <span>(Up to $5,000)</span>
                </div>
                <div class="arrow">&#10230;</div>
                <div class="approver" id="approver-Director">
                    <div class="status-light"></div>
                    <h3>ğŸ‘‘ Director</h3>
                    <span>(Up to $20,000)</span>
                </div>
            </div>

            <form id="expense-form">
                <label for="expense-amount">Enter Expense Amount:</label>
                <div class="input-group">
                    <span>$</span>
                    <input type="number" id="expense-amount" name="amount" placeholder="e.g., 1250.75" step="0.01" required>
                </div>
                <button type="submit">ğŸš€ Submit for Approval</button>
            </form>

            <div id="log-container">
                <h2>Final Result</h2>
                <pre id="final-output">Awaiting submission...</pre>
            </div>

            <div class="accordion-container">
                <button class="accordion-button">ğŸ¤” How It Works</button>
                <div class="accordion-panel">
                    <p>This application demonstrates the <strong>Chain of Responsibility</strong>, a behavioral design pattern.</p>
                    <ul>
                        <li>An expense report (the <i>request</i>) is sent to the first handler in a chain.</li>
                        <li><strong>Junior Approver:</strong> The first handler checks if it can approve the expense (amount &le; $500).</li>
                        <li><strong>Pass Along:</strong> If it can't, it doesn't reject it. Instead, it passes the request to the next handler in the chain (the Manager).</li>
                        <li><strong>Manager &amp; Director:</strong> This process repeats. The Manager handles expenses up to $5,000. The Director handles up to $20,000.</li>
                        <li><strong>Decoupling:</strong> The client who submits the request doesn't know who will ultimately approve it. The handlers are decoupled from each other and only know about the next one in the chain.</li>
                    </ul>
                </div>

                <button class="accordion-button">ğŸ“œ Detailed Process Log</button>
                <div class="accordion-panel">
                    <pre id="detailed-log-output">No process has been run yet.</pre>
                </div>
            </div>

        </main>

        <footer>
            <p>Built with Flask & Vanilla JS</p>
        </footer>
    </div>
    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>